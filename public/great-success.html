<!DOCTYPE html>
<html>
  <head>
    <title>Great success</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="description" content="Mijn Pelckmans Login" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type="text/css"></style>
  </head>
  <body>
    <h1>Great success!</h1>
    <img src="https://media.tenor.com/2y6XTN-gDUIAAAAC/borat-great.gif" />
  </body>
  <script>
    (() => {
      const params = {
        code: new URLSearchParams(window.location.search).get('code'),
        client_id: 'pelckmans-api',
        client_secret: 'very_secret_secret',
        grant_type: 'authorization_code',
      };

      fetch('/token', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8',
        },
        body: Object.entries(params)
          .map(([key, value]) => `${encodeURIComponent(key)}=${encodeURIComponent(value)}`)
          .join('&'),
      }).then(response => {
        if (response.redirected) {
          window.location.href = response.url;
        }
      });
    })();
  </script>
</html>
